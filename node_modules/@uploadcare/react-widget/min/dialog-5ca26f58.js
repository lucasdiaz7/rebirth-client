import{b as e,c as n,e as r}from"./index-4702f797.js";import t,{useRef as l,useEffect as i,useImperativeHandle as o}from"react";import a from"uploadcare-widget/uploadcare.min";import{u,a as c,b as s}from"./use-deep-effect-5fac1699.js";import"react-fast-compare";import"@uploadcare/client-suspense";var f={height:"500px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},d=function(d){var p=function(e,t){var a=e.value,f=void 0===a?[]:a,d=e.apiRef,p=e.customTabs,C=e.tabsCss,m=e.locale,L=e.localeTranslations,v=e.localePluralize,A=e.onTabChange,b=e.onChange,y=e.onProgress,w=l(null),E=l(null),T=u(A),R=u(b),_=u(y);return c(p,t),s((function(){return m&&(window.UPLOADCARE_LOCALE=m),v&&(window.UPLOADCARE_LOCALE_PLURALIZE=v),L&&(window.UPLOADCARE_LOCALE_TRANSLATIONS=L),function(){m&&delete window.UPLOADCARE_LOCALE,v&&delete window.UPLOADCARE_LOCALE_PLURALIZE,L&&delete window.UPLOADCARE_LOCALE_TRANSLATIONS}}),[m,v,L]),i((function(){t&&C&&"string"==typeof C&&(0===C.indexOf("https://")?t.tabsCss.addUrl(C):t.tabsCss.addStyle(C))}),[t,C]),i((function(){var r=Array.isArray(f)?f:[f];E.current&&E.current.reject(),E.current=t.openPanel(w.current,r,n(n({multipleMax:e.multiple?void 0:1},e),{},{multiple:!0}))}),[t,e]),i((function(){var e=E.current;e.progress(T);var n=function(){var e=E.current.fileColl.__items.map((function(e){return e.promise()}));R(e)},r=function(){var e=E.current.fileColl.lastProgresses();_(e)};return e.fileColl.anyProgressList.add(r),e.fileColl.anyDoneList.add(n),e.fileColl.anyFailList.add(n),e.fileColl.onRemove.add(n),e.fileColl.onReplace.add(n),e.fileColl.onSort.add(n),function(){var e=E.current;e.fileColl.anyProgressList.remove(r),e.fileColl.anyDoneList.remove(n),e.fileColl.anyFailList.remove(n),e.fileColl.onRemove.remove(n),e.fileColl.onReplace.remove(n),e.fileColl.onSort.remove(n)}}),[T,R,_]),o(d,(function(){return{onTabVisibility:function(e){return E.current.onTabVisibility(e)},hideTab:function(e){return E.current.hideTab(e)},showTab:function(e){return E.current.showTab(e)},switchTab:function(e){return E.current.switchTab(e)},addFiles:function(e){return E.current.addFiles(e)},isTabVisible:function(e){return E.current.isTabVisible(e)},getFileColl:function(){return E.current.fileColl},getRawDialogApi:function(){return E.current}}}),[]),i((function(){return function(){return E.current&&E.current.reject()}}),[]),i((function(){var n=!1;E.current.fileColl.clear();var l,i=r(f);try{for(i.s();!(l=i.n()).done;){var o=l.value;if("string"==typeof o&&o.includes("~")){t.loadFileGroup(o,e).then((function(e){if(!n){var r=e.files();E.current.addFiles(r)}}));break}E.current.fileColl.add(t.fileFrom("uploaded",o,e))}}catch(e){i.e(e)}finally{i.f()}return function(){n=!0}}),[f]),[w]}(d,a),C=e(p,1)[0];return t.createElement("div",{id:d.id,style:f},t.createElement("style",null,"\n  .uploadcare--preview__done, .uploadcare--panel__done {\n    display: none;\n  }\n"),t.createElement("div",{ref:C}))};export{d as default};
