{"ast":null,"code":"var Promise = require('bluebird');\n\nvar configurations = require('../configurations');\n\nvar preConditions = require('../precondition'); // Private variables to hide them from the integrator\n\n\nvar requestManager;\nvar execOptions;\n\nvar mercadopagoResponse = function mercadopagoResponse(body, status, idempotencyId, pagination, options, requestManagerInjection) {\n  this.body = body;\n  this.response = this.body;\n  this.status = status;\n  this.idempotency = idempotencyId;\n  this.pagination = pagination;\n  execOptions = options;\n  requestManager = requestManagerInjection;\n};\n/*\n * Execute request using the requestManager and execOptions\n * @param resolve\n * @param reject\n * @param callback\n * @returns {*}\n */\n\n\nvar executeRequest = function (resolve, reject, callback) {\n  callback = preConditions.getCallback(callback);\n  return requestManager.generateAccessToken().then(function () {\n    return requestManager.exec(execOptions);\n  }).then(function (response) {\n    resolve(response);\n    return callback.apply(null, [null, response]);\n  }).catch(function (err) {\n    reject(err);\n    return callback.apply(null, [err, null]);\n  });\n};\n/*\n * Execute previous page request using the requestManager\n * @param callback\n */\n\n\nmercadopagoResponse.prototype.prev = function (callback) {\n  var error;\n  callback = preConditions.getCallback(callback);\n  return new Promise(function (resolve, reject) {\n    var previousPage;\n\n    if (!this.pagination) {\n      error = new Error('This response doesnt support pagination');\n      reject(error);\n      return callback.apply(null, [error, null]);\n    } // Set previous page\n\n\n    previousPage = this.pagination.offset - this.pagination.limit; // Setting the new limit and offset\n\n    execOptions.config.qs.limit = this.pagination.limit;\n    execOptions.config.qs.offset = previousPage >= 0 ? previousPage : 0;\n    return executeRequest(resolve, reject, callback);\n  }.bind(this));\n};\n/*\n * Execute next page request using the requestManager\n * @param callback\n */\n\n\nmercadopagoResponse.prototype.next = function (callback) {\n  var error;\n  callback = preConditions.getCallback(callback);\n  return new Promise(function (resolve, reject) {\n    if (!this.pagination) {\n      error = new Error('This response doesnt support pagination');\n      reject(error);\n      return callback.apply(null, [error, null]);\n    } // Setting the new limit and offset\n\n\n    execOptions.config.qs.limit = this.pagination.limit;\n    execOptions.config.qs.offset = this.pagination.offset + this.pagination.limit;\n    return executeRequest(resolve, reject, callback);\n  }.bind(this));\n};\n/*\n * Check if it haves a previous page\n * @returns {boolean}\n */\n\n\nmercadopagoResponse.prototype.hasPrev = function () {\n  return this.pagination && this.pagination.offset > 0;\n};\n/*\n * Check if it haves a next page\n * @returns {boolean}\n */\n\n\nmercadopagoResponse.prototype.hasNext = function () {\n  return this.pagination && this.pagination.offset + this.pagination.limit < this.pagination.total;\n};\n/*\n * Get exec options\n * @returns {*}\n */\n\n\nmercadopagoResponse.prototype.getExecOptions = function () {\n  return execOptions;\n};\n\nmodule.exports = mercadopagoResponse;","map":{"version":3,"names":["Promise","require","configurations","preConditions","requestManager","execOptions","mercadopagoResponse","body","status","idempotencyId","pagination","options","requestManagerInjection","response","idempotency","executeRequest","resolve","reject","callback","getCallback","generateAccessToken","then","exec","apply","catch","err","prototype","prev","error","previousPage","Error","offset","limit","config","qs","bind","next","hasPrev","hasNext","total","getExecOptions","module","exports"],"sources":["C:/Backup/Desktop/LUCAS/henry/PROYECTO FINAL/PF-Rebirth/PF-Rebirth/client/node_modules/mercadopago/lib/utils/mercadopagoResponse.js"],"sourcesContent":["var Promise = require('bluebird');\nvar configurations = require('../configurations');\nvar preConditions = require('../precondition');\n\n// Private variables to hide them from the integrator\nvar requestManager;\nvar execOptions;\n\nvar mercadopagoResponse = function mercadopagoResponse(body, status, idempotencyId, pagination, options, requestManagerInjection) {\n  this.body = body;\n  this.response = this.body;\n  this.status = status;\n  this.idempotency = idempotencyId;\n  this.pagination = pagination;\n\n  execOptions = options;\n  requestManager = requestManagerInjection;\n};\n\n/*\n * Execute request using the requestManager and execOptions\n * @param resolve\n * @param reject\n * @param callback\n * @returns {*}\n */\nvar executeRequest = function (resolve, reject, callback) {\n  callback = preConditions.getCallback(callback);\n\n  return requestManager.generateAccessToken().then(function () {\n    return requestManager.exec(execOptions);\n  }).then(function (response) {\n    resolve(response);\n    return callback.apply(null, [null, response]);\n  }).catch(function (err) {\n    reject(err);\n    return callback.apply(null, [err, null]);\n  });\n};\n\n/*\n * Execute previous page request using the requestManager\n * @param callback\n */\nmercadopagoResponse.prototype.prev = function (callback) {\n  var error;\n\n  callback = preConditions.getCallback(callback);\n\n  return new Promise(function (resolve, reject) {\n    var previousPage;\n\n    if (!this.pagination) {\n      error = new Error('This response doesnt support pagination');\n      reject(error);\n      return callback.apply(null, [error, null]);\n    }\n\n    // Set previous page\n    previousPage = this.pagination.offset - this.pagination.limit;\n\n    // Setting the new limit and offset\n    execOptions.config.qs.limit = this.pagination.limit;\n    execOptions.config.qs.offset = (previousPage >= 0) ? previousPage : 0;\n\n    return executeRequest(resolve, reject, callback);\n  }.bind(this));\n};\n\n/*\n * Execute next page request using the requestManager\n * @param callback\n */\nmercadopagoResponse.prototype.next = function (callback) {\n  var error;\n\n  callback = preConditions.getCallback(callback);\n\n  return new Promise(function (resolve, reject) {\n    if (!this.pagination) {\n      error = new Error('This response doesnt support pagination');\n      reject(error);\n      return callback.apply(null, [error, null]);\n    }\n\n    // Setting the new limit and offset\n    execOptions.config.qs.limit = this.pagination.limit;\n    execOptions.config.qs.offset = this.pagination.offset + this.pagination.limit;\n\n    return executeRequest(resolve, reject, callback);\n  }.bind(this));\n};\n\n/*\n * Check if it haves a previous page\n * @returns {boolean}\n */\nmercadopagoResponse.prototype.hasPrev = function () {\n  return (this.pagination && (this.pagination.offset > 0));\n};\n\n/*\n * Check if it haves a next page\n * @returns {boolean}\n */\nmercadopagoResponse.prototype.hasNext = function () {\n  return (this.pagination && ((this.pagination.offset + this.pagination.limit) < this.pagination.total));\n};\n\n/*\n * Get exec options\n * @returns {*}\n */\nmercadopagoResponse.prototype.getExecOptions = function () {\n  return execOptions;\n};\n\nmodule.exports = mercadopagoResponse;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}