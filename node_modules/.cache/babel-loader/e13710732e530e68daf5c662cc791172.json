{"ast":null,"code":"var _jsxFileName = \"C:\\\\Backup\\\\Desktop\\\\LUCAS\\\\henry\\\\PROYECTO FINAL\\\\PF-Rebirth\\\\PF-Rebirth\\\\client\\\\src\\\\Dashboard\\\\Components\\\\MyAdoptions\\\\Components\\\\MessageBoard\\\\Chat.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./Chat.css\";\nimport sendButton from \"../../../../../Assets/Messageboard/send.svg\";\nimport { getMessage, postMessage, putVisto } from \"../../../../../Redux/Actions\"; // warning-> getChat\n\nimport { useDispatch, useSelector } from \"react-redux\"; // import { PUT_VISTO } from \"../../../../../Redux/Actions/actionTypes\"; warning\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chat(_ref) {\n  _s();\n\n  let {\n    allMessages\n  } = _ref;\n  let mail = \"\";\n  const infoStorage = localStorage.getItem(\"user\");\n  const user = JSON.parse(infoStorage);\n  if (infoStorage) mail = user.mail;\n  let setEmail = new Set(allMessages.map(message => message.userMail));\n  let arrayMail = Array.from(setEmail);\n  let mailVisto = arrayMail[0] === mail ? arrayMail[1] : arrayMail[0];\n  const dispatch = useDispatch();\n  let [inputChat, setInputChat] = useState(\"\");\n  let adoptionId = useSelector(state => state.adoptionId);\n  setTimeout(() => {\n    let finalScroll = document.getElementById(\"scroll\");\n    finalScroll.scrollTop = finalScroll.scrollHeight;\n  }, 200);\n\n  function handleClick() {\n    inputChat.length > 0 && dispatch(postMessage({\n      userMail: mail,\n      message: inputChat,\n      adoptionId: adoptionId\n    }));\n    setTimeout(() => dispatch(getMessage(adoptionId)), 300);\n    setInputChat(\"\");\n    let finalScroll = document.getElementById(\"scroll\");\n    finalScroll.scrollTop = finalScroll.scrollHeight;\n    if (mailVisto) dispatch(putVisto(mailVisto, adoptionId));\n  }\n\n  function handleOnChange(e) {\n    setInputChat(e.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container chat-font-size\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"scroll\",\n        className: \"chat-display\",\n        children: allMessages.length > 0 && allMessages.map(messa => {\n          let newMsg = messa.nuevo ? \"--New--\" : \"\";\n          return messa.userMail === mail ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-right\",\n            children: messa.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-left-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-new\",\n              children: newMsg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-left\",\n              children: messa.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input-container chat-font-size\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"chat-input\",\n        name: \"chat\",\n        value: inputChat,\n        onChange: e => handleOnChange(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleClick(),\n        className: \"chat-button\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: sendButton,\n          alt: \"send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Chat, \"JEMxwUpaAhrkR/VjUlc+jbfd1fQ=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","getMessage","postMessage","putVisto","useDispatch","useSelector","Chat","allMessages","mail","infoStorage","localStorage","getItem","user","JSON","parse","setEmail","Set","map","message","userMail","arrayMail","Array","from","mailVisto","dispatch","inputChat","setInputChat","adoptionId","state","setTimeout","finalScroll","document","getElementById","scrollTop","scrollHeight","handleClick","length","handleOnChange","e","target","value","messa","newMsg","nuevo","sendButton"],"sources":["C:/Backup/Desktop/LUCAS/henry/PROYECTO FINAL/PF-Rebirth/PF-Rebirth/client/src/Dashboard/Components/MyAdoptions/Components/MessageBoard/Chat.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./Chat.css\";\r\nimport sendButton from \"../../../../../Assets/Messageboard/send.svg\";\r\nimport {\r\n  getMessage,\r\n  postMessage,\r\n  putVisto,\r\n} from \"../../../../../Redux/Actions\"; // warning-> getChat\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n// import { PUT_VISTO } from \"../../../../../Redux/Actions/actionTypes\"; warning\r\n\r\n\r\nexport default function Chat({ allMessages }) {\r\nlet mail=\"\"\r\n  const infoStorage = localStorage.getItem(\"user\");\r\n  const user = JSON.parse(infoStorage);\r\n  if(infoStorage) mail = user.mail;\r\n  let setEmail = new Set(allMessages.map((message) => message.userMail));\r\n  let arrayMail = Array.from(setEmail);\r\n  let mailVisto = arrayMail[0] === mail ? arrayMail[1] : arrayMail[0];\r\n  const dispatch = useDispatch();\r\n  let [inputChat, setInputChat] = useState(\"\");\r\n  let adoptionId = useSelector((state) => state.adoptionId);\r\n  setTimeout(() => {\r\n    let finalScroll = document.getElementById(\"scroll\");\r\n    finalScroll.scrollTop = finalScroll.scrollHeight;\r\n  }, 200);\r\n  function handleClick() {\r\n    inputChat.length > 0 &&\r\n      dispatch(\r\n        postMessage({\r\n          userMail: mail,\r\n          message: inputChat,\r\n          adoptionId: adoptionId,\r\n        })\r\n      );\r\n    setTimeout(() => dispatch(getMessage(adoptionId)), 300);\r\n    setInputChat(\"\");\r\n    let finalScroll = document.getElementById(\"scroll\");\r\n    finalScroll.scrollTop = finalScroll.scrollHeight;\r\n    if (mailVisto) dispatch(putVisto(mailVisto, adoptionId));\r\n  }\r\n  function handleOnChange(e) {\r\n    setInputChat(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"chat-container chat-font-size\">\r\n        <div id=\"scroll\" className=\"chat-display\">\r\n          {allMessages.length > 0 &&\r\n            allMessages.map((messa) => {\r\n              let newMsg = messa.nuevo ? \"--New--\" : \"\";\r\n              return messa.userMail === mail ? (\r\n                <div className=\"chat-right\">{messa.message}</div>\r\n              ) : (\r\n                <div className=\"chat-left-container\">\r\n                  <div className=\"chat-new\">{newMsg}</div>\r\n                  <div className=\"chat-left\">{messa.message}</div>\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n      </div>\r\n      <div className=\"chat-input-container chat-font-size\">\r\n        <textarea\r\n          className=\"chat-input\"\r\n          name=\"chat\"\r\n          value={inputChat}\r\n          onChange={(e) => handleOnChange(e)}\r\n        />\r\n        <button onClick={() => handleClick()} className=\"chat-button\">\r\n          <img src={sendButton} alt =\"send\"></img>{\" \"}\r\n        </button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}