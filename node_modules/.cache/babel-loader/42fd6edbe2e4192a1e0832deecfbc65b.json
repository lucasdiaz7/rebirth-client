{"ast":null,"code":"var _jsxFileName = \"C:\\\\Backup\\\\Desktop\\\\LUCAS\\\\henry\\\\PROYECTO FINAL\\\\PF-Rebirth\\\\PF-Rebirth\\\\client\\\\src\\\\Dashboard\\\\Components\\\\MyAdoptions\\\\Components\\\\MessageBoard\\\\Chat.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./Chat.css\";\nimport sendButton from \"../../../../../Assets/Messageboard/send.svg\";\nimport { CreaUpdateNotification, getMessage, postMessage, putVisto } from \"../../../../../Redux/Actions\"; // warning-> getChat\n\nimport { useDispatch, useSelector } from \"react-redux\"; // import { PUT_VISTO } from \"../../../../../Redux/Actions/actionTypes\"; warning\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chat(_ref) {\n  _s();\n\n  let {\n    allMessages,\n    otherMail\n  } = _ref;\n  let mail = \"\";\n  const infoStorage = localStorage.getItem(\"user\");\n  const user = JSON.parse(infoStorage);\n  if (infoStorage) mail = user.mail;\n  let mailVisto = otherMail;\n  const dispatch = useDispatch();\n  let [inputChat, setInputChat] = useState(\"\");\n  let adoptionId = useSelector(state => state.adoptionId);\n  setTimeout(() => {\n    let finalScroll = document.getElementById(\"scroll\");\n    finalScroll.scrollTop = finalScroll.scrollHeight;\n  }, 200);\n  console.log('adoptionId :>> ', adoptionId);\n  useEffect(() => {\n    dispatch(getMessage(adoptionId));\n  }, [dispatch, adoptionId]);\n\n  function handleClick() {\n    inputChat.length > 0 && dispatch(postMessage({\n      userMail: mail,\n      message: inputChat,\n      adoptionId: adoptionId\n    }));\n    setTimeout(() => dispatch(getMessage(adoptionId)), 300);\n    setInputChat(\"\");\n    let finalScroll = document.getElementById(\"scroll\");\n    finalScroll.scrollTop = finalScroll.scrollHeight;\n    if (mailVisto) dispatch(putVisto(mailVisto, adoptionId));\n    if (mailVisto) dispatch(CreaUpdateNotification(mailVisto));\n  }\n\n  function handleOnChange(e) {\n    setInputChat(e.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container chat-font-size\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"scroll\",\n        className: \"chat-display\",\n        children: allMessages.length > 0 && allMessages.map(messa => {\n          let newMsg = messa.nuevo ? \"--New--\" : \"\";\n          return messa.userMail === mail ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-right\",\n            children: messa.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-left-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-new\",\n              children: newMsg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-left\",\n              children: messa.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input-container chat-font-size\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"chat-input\",\n        name: \"chat\",\n        value: inputChat,\n        onChange: e => handleOnChange(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleClick(),\n        className: \"chat-button\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: sendButton,\n          alt: \"send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Chat, \"WK0fmKo1O0GymHus5RjPXHGAJZ0=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useEffect","useState","CreaUpdateNotification","getMessage","postMessage","putVisto","useDispatch","useSelector","Chat","allMessages","otherMail","mail","infoStorage","localStorage","getItem","user","JSON","parse","mailVisto","dispatch","inputChat","setInputChat","adoptionId","state","setTimeout","finalScroll","document","getElementById","scrollTop","scrollHeight","console","log","handleClick","length","userMail","message","handleOnChange","e","target","value","map","messa","newMsg","nuevo","sendButton"],"sources":["C:/Backup/Desktop/LUCAS/henry/PROYECTO FINAL/PF-Rebirth/PF-Rebirth/client/src/Dashboard/Components/MyAdoptions/Components/MessageBoard/Chat.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./Chat.css\";\r\nimport sendButton from \"../../../../../Assets/Messageboard/send.svg\";\r\nimport {\r\n  CreaUpdateNotification,\r\n  getMessage,\r\n  postMessage,\r\n  putVisto,\r\n} from \"../../../../../Redux/Actions\"; // warning-> getChat\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n// import { PUT_VISTO } from \"../../../../../Redux/Actions/actionTypes\"; warning\r\n\r\nexport default function Chat({ allMessages, otherMail }) {\r\n  let mail = \"\";\r\n  const infoStorage = localStorage.getItem(\"user\");\r\n  const user = JSON.parse(infoStorage);\r\n  if (infoStorage) mail = user.mail;\r\n  let mailVisto = otherMail;\r\n\r\n  const dispatch = useDispatch();\r\n  let [inputChat, setInputChat] = useState(\"\");\r\n  let adoptionId = useSelector((state) => state.adoptionId);\r\n\r\n  setTimeout(() => {\r\n    let finalScroll = document.getElementById(\"scroll\");\r\n    finalScroll.scrollTop = finalScroll.scrollHeight;\r\n  }, 200);\r\n\r\n  console.log('adoptionId :>> ', adoptionId);\r\n\r\n  useEffect(() => {\r\n    dispatch(getMessage(adoptionId))\r\n  }, [dispatch, adoptionId])\r\n  \r\n  function handleClick() {\r\n\r\n    inputChat.length > 0 &&\r\n      dispatch(\r\n        postMessage({\r\n          userMail: mail,\r\n          message: inputChat,\r\n          adoptionId: adoptionId,\r\n        })\r\n      );\r\n    setTimeout(() => dispatch(getMessage(adoptionId)), 300);\r\n    setInputChat(\"\");\r\n    let finalScroll = document.getElementById(\"scroll\");\r\n    finalScroll.scrollTop = finalScroll.scrollHeight;\r\n    if (mailVisto) dispatch(putVisto(mailVisto, adoptionId));\r\n    if (mailVisto) dispatch(CreaUpdateNotification(mailVisto));\r\n\r\n  }\r\n\r\n  function handleOnChange(e) {\r\n    setInputChat(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"chat-container chat-font-size\">\r\n        <div id=\"scroll\" className=\"chat-display\">\r\n          {allMessages.length > 0 &&\r\n            allMessages.map((messa) => {\r\n              let newMsg = messa.nuevo ? \"--New--\" : \"\";\r\n              return messa.userMail === mail ? (\r\n                <div className=\"chat-right\">{messa.message}</div>\r\n              ) : (\r\n                <div className=\"chat-left-container\">\r\n                  <div className=\"chat-new\">{newMsg}</div>\r\n                  <div className=\"chat-left\">{messa.message}</div>\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n      </div>\r\n      <div className=\"chat-input-container chat-font-size\">\r\n        <textarea\r\n          className=\"chat-input\"\r\n          name=\"chat\"\r\n          value={inputChat}\r\n          onChange={(e) => handleOnChange(e)}\r\n        />\r\n        <button onClick={() => handleClick()} className=\"chat-button\">\r\n          <img src={sendButton} alt=\"send\"></img>{\" \"}\r\n        </button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}